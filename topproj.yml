version: 1.0.{build}
branches:
  only:
  - arm64
image:
#- Visual Studio 2013
#- Visual Studio 2015
- Visual Studio 2017
configuration: Release
platform:
- ARM64
install:
- git submodule update --init --recursive --jobs 4
before_build:
- cmd: nuget restore win\audacity.sln
- 'echo #define REV_LONG "%APPVEYOR_REPO_COMMIT%" > src\RevisionIdent.h'
- 'echo #define REV_TIME "%APPVEYOR_REPO_COMMIT_TIMESTAMP%" >> src\RevisionIdent.h'
build:
  project: win\top.proj
  parallel: true
  verbosity: minimal
before_package:
- cmd: >-
    del /S win\build\*.lib &
    del /S win\build\*.ipdb &
    del /S win\build\*.iobj &
    del /S win\build\*.pdb &
    del /S win\build\*.exp
artifacts:
- path: win\build\bin
  name: 'audacity-%APPVEYOR_REPO_BRANCH%-%PLATFORM%-%APPVEYOR_BUILD_VERSION%-%APPVEYOR_REPO_COMMIT%-%APPVEYOR_BUILD_WORKER_IMAGE%'
